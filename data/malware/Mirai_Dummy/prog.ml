let mirai (p : Path.t) : unit =
  if openFile p 2 then (
    let (code : int) = disableDevice p in
    ioctl p code;
    closeFile p);
  chdir (getRoot ());
  ()

let[@assertRty] mirai ?l:(p = (is_detect_device v : [%v: Path.t])) =
  { pre = _G (Any true); res = (true : [%v: unit]); post = rI p }
